# JetCalc - программная платформа моделирования сложных экономических систем с системой обратной связи

## **Назначение JetCalc**

[JetCalc](https://www.leossnet.ru) представляет собой систему планирования и моделирования хозяйственной деятельности крупных многопрофильных компаний (десятки предприятий, сотни калькулируемых видов продукции и тысячи инвестиционных проектов) с возможностью периодического сбора фактических показателей и анализа выполнения плановых заданий. 

В отличие от конкурирующих продуктов в сфере бизнес-аналитики JetCalc обладает рядом уникальных характеристик:

- реальная 100% независимость от программистов при разработке моделей предметной области, что кардинально сокращает время на разработку, тестирование и сопровождение моделей в сравнении с традиционными подходами в разработке программных продуктов;
- наличие встроенного высокоэффективного языка контекстно-зависимых формул, определяемых на уровне строк и(или) колонок табличных документов;
- легкая масштабируемость по объектам учета, документам и расчетным алгоритмам, ориентированная на постепенное усложнение моделей и увеличение объемов данных;
- распространение программного кода JetCalc на условиях Open Source по лицензии MIT, предоставляющей максимальные права по использованию программного кода;
- минимальные требования к производительности клиентского и серверного компьютерного оборудования;
- высокая степень защищенности данных предметной области, в том числе от несанкционированного доступа разработчиков и технических служб;
- возможность размещения и последующего распространения создаваемых в системе JetCalc экономических моделей в формате JSON на сервере GitHub под различными лицензиями на усмотрение разработчиков моделей.

Система обратной связи в [JetCalc](https://www.leossnt.ru) реализована с помощью:
- логирования действий каждого пользователя по заполнению  документов и изменения статуса каждого документа (открыт, заблокирован, проверен);
- увязки изменения статуса документа с прохождением различных проверок на достоверность вводимых данных и отсутствие в них арифметических и логических ошибок;
- создания для каждого документа инструкций для пользователей по заполнению и последующему анализу данных;
- обсуждения профессиональных вопросов в специлизированном чате, работающем  в контексте документа;
- доведения информации до пользователей через систему публикации широковещательных объявления с подтверждением прочтения. 

Для развертывания [JetCalc](https://www.leossnt.ru) на сервере достаточно 4-х ядерного процессора, 8 Гб оперативной памяти и 10 Гб диска SSD (стоимость хостинга с такими параметрами, например [NetAngels](https://www.netangels.ru/), составляет 1300 рублей в месяц).

## **Серверная часть кода**

### NGINX

Статические файлы системы отдаются через веб-сервер [NGINX](https://nginx.ru/) . Файлы расположенные в папке **static** и папках модулей доступны из браузера, а все вызовы начинающиеся с префикса **/api/** передаются на обработку в [Node.js](https://nodejs.org/en/).

### Node.js 

Весь серверный код выполняется на сервере [Node.js](https://nodejs.org/en/) посредством библиотеки [Express](http://expressjs.com/). Для работы с датами испльзуется библиотека [Moment.js](https://momentjs.com/). Для оптимизации и сокращения количества кода используются функциональные возможности библиотеки [Lodash](https://lodash.com/). Для того, чтобы избежать больших количеств вложенных функций (callback hell), применяется библиотека [Async](https://github.com/caolan/async). В системе принципиально не используются Promise (но это может не остановить сторонних разработчиков).

### PostgreSQL

В системе реляционная база данных [PostgreSQL](https://www.postgresql.org/) используется для хранения первичных значений ячеек документов. Все механизмы взаимодействия с базой данных производятся через специальные процедуры. Все запросы из приложения к базе данных выполняются каждый раз по-новому без промежуточного кеширования. 

### MongoDB

В [MongoDB](https://www.mongodb.com/) хранится вся информация приложения о всех настройках предметной области. Взаимодействие системы c [MongoDB](https://www.mongodb.com/) осущесвляется посредством расширения [Mongoose](http://mongoosejs.com/).

### Redis

[Redis](https://redis.io/) используется для кеширования практически всех данных работаюдщего приложения в оперативной памяти, кроме первичных значений ячеек, хранящихся в [PostgreSQL](https://www.postgresql.org/).

## **Клиентская часть кода**

Клиентская часть реализована в виде модульного одностраничного приложения на JavaScript, в которой применяются те же [Lodash](https://lodash.com/), [Moment.js](https://momentjs.com/) и [Async](https://github.com/caolan/async). 

При проектировании работы подключаемого модуля следует учитывать, что если модуль требует тяжеловесных сторонних библиотек, то их можно подгружать при необходимости с помощью [RequireJS](http://requirejs.org/). Хороший пример - модуль построения графиков (chart), который подгружает большие библиотеки [C3](https://c3js.org/) и [D3](https://d3js.org/) только когда пользователь находится на странице в графиками.

В клиентском коде для привязки данных применяется библиотека [Knockout](http://knockoutjs.com/).

В системе подключается библиотека [jQuery](https://jquery.com/), хотя в большинстве случаев она не не используется напрямую, особенно с завязыванием на атрибут id элемента. Эти задачи решаются  через **custom binding**.

Для верстки системы используется [Bootstrap](https://getbootstrap.com/).

## **Дополнительные ресурсы**

Более подробно о назначкении системы [JetCalc](https://www.leossnet.ru) можно узнать на сайте [www.leossnet.ru](https://www.leossnet.ru), на котором размещены различные методические материалы по настройке и эффективному использованию [JetCalc](https://www.leossnet.ru) в практической деятельности финансово-экономических подразделений. 

На GitBook разрабатывается [документация по JetCalc](https://leossnet.gitbooks.io/nachalo-raboti-v-jetcalc). Приветствуются любые замечания и предложения по документации, которые можно высылать на почту **jetcalc@leossnet.ru**. 

На облачной VDS по адресу [jetcalc.leossnet.ru](https://jetcalc.leossnet.ru) развернута демо-версия [JetCalc](https://www.leossnet.ru). С логином  **demo** и паролем **demo** доступен вход только по чтению для предварительного знакомства с пользовательским интерфейсом. Чтобы получить расширенный доступ, необходимо зарегистрироваться в [демо-версии JetCalc](https://jetcalc.leossnet.ru), выбрав пункт **Регистрация** на странице ввода логина и пароля.

Координация деятельности экономистов и программистов, участвующих в развитии проекта, осуществляется на хостинге компании [JetBrains](https://www.jetbrains.com/) в трекере [YouTrack](https://leossnet.myjetbrains.com/youtrack/issues). 
