<script id="period_form_editor_text" type="text/html">
    <input type="text" class='small_input' data-bind='value:$data.Value'></input>
</script>

<script id="period_form_editor_combobox" type="text/html">
    <combobox-editor params="field:$data.Value,fieldname:$data.Name,refmodel:'period',mainmodel:$data.Model">
    </combobox-editor>
</script>

<script id="period_form_editor_checkbox" type="text/html">
    <input type="checkbox" class='ace ace-checkbox-2' data-bind='checked:$data.Value'>
    <span class="lbl"></span>
    </input>
</script>

<script id="period_form_editor" type="text/html">
    <!-- ko if:$data.Editor == 'text' -->
    <!-- ko template:{
        name:'period_form_editor_text',
		data:{
            Value: $data.Value,
        }
    } -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- ko if:$data.Editor == 'check' -->
    <!-- ko template:{
        name:'period_form_editor_check',
		data:{
            Value: $data.Value,
        }
    } -->
    <!-- /ko -->
    <!-- /ko -->
    <!-- ko if:$data.Editor == 'combobox' -->
    <!-- ko template:{
        name:'period_form_editor_combobox',
		data:{
            Value: $data.Value,
            Name: $data.Name,
            Model: $data.Model
        }
    } -->
    <!-- /ko -->
    <!-- /ko -->
</script>

<script id="period_form" type="text/html">
    <div class='row'>
        <table class="table table-striped table-bordered table-hover dataTable no-footer small-paddings periodsMapTable">
            <tbody data-bind='foreach:MPeriodForm.MainPeriods'>
                <tr data-bind='css:{active:MPeriodForm.IsCurrentEditPeriod($data)}'>
                    <td>
                        <span class="action-buttons gray-icons">
                                <a  data-bind="title:Lang.Tr('period','edit'), click:MPeriods.SetEditPeriod">
                                    <i class="ace-icon fa fa-pencil"></i>
                                </a>
                        </span>
                    </td>
                    <td data-bind='text:$data.CodePeriod'></td>
                    <td data-bind='text:$data.NamePeriod'></td>
                    <td>
                        <table class="table openperiods table-striped table-bordered table-hover dataTable no-footer" style='min-width: 600px;'>
                            <thead data-bind='if:MPeriodForm.LinkPeriods()[$data.CodePeriod()]().length'>
                                <tr>
                                    <!-- ko foreach:MPeriodForm.period_edit_fields -->
                                    <td data-bind="text:$data.name"></td>
                                    <!-- /ko -->
                                    <!-- ko if:MPeriodForm.IsCurrentEditPeriod($data) -->
                                    <td></td>
                                    <!-- /ko -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- ko if:MPeriodForm.IsCurrentEditPeriod($data) -->
                                <!-- ko foreach:MPeriodForm.LinkPeriods()[$data.CodePeriod()] -->
                                <tr>
                                    <!-- ko foreach:MPeriodForm.period_edit_fields -->
                                    <td data-bind="attr:{class:$data.class}">
                                        <!-- ko template:{
                                            name:'period_form_editor',
				                            data:{
                                                Editor: $data.editor,
                                                Value: $parent[$data.field_name],
                                                Name: $data.name,
                                                Model: MPeriodForm.model()
                                            }
			                             } -->
                                        <!-- /ko -->
                                    </td>
                                    <!-- /ko -->
                                    <td class='middle_check'>
                                        <a data-bind="click:MPeriodForm.RemoveLinkPeriod.bind($data,$parent.CodePeriod())">
                                            <i class="fa fa-icon fa-times"></i>
                                        </a>
                                    </td>
                                </tr>
                                <!-- /ko -->
                                <tr>
                                    <td colspan=5>
                                        <a class="addLinkModel" data-bind="click:MPeriodForm.AddLinkPeriod.bind(null,$data.CodePeriod())">Добавить период</a>
                                    </td>
                                </tr>
                                <!-- /ko -->
                                <!-- ko ifnot:MPeriodForm.IsCurrentEditPeriod($data) -->
                                <!-- ko foreach:MPeriodForm.LinkPeriods()[$data.CodePeriod()] -->
                                <tr>
                                    <!-- ko foreach:MPeriodForm.period_edit_fields -->
                                    <td data-bind="attr:{class:$data.class}, html:$data.wrapper($parent[$data.field_name])"></td>
                                    <!-- /ko -->
                                </tr>
                                <!-- /ko -->
                                <!-- /ko -->
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</script>
