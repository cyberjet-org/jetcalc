<div class="wysiwyg-toolbar btn-toolbar toolH" data-bind='with:MPeriods'>
    <!-- ko template:'tb_simple_loader' --><!-- /ko -->
    <!-- ko if:$data.IsModelEdit() -->
    	<!-- ko template:'model_edit_buttons' --><!-- /ko -->
    	<!-- ko template:'model_edit_search' --><!-- /ko -->
    <!-- /ko -->
    <!-- ko if:Mode()=='PeriodEdit' -->
        <div class="btn-group">
            <!-- ko template:{name:'save_with_count',data:{save:MPeriods.SaveChanges,count:MPeriods.PeriodEditChangesCount}} --><!-- /ko -->
            <a class="btn btn-sm btn-white" data-bind="'Отменить все изменения',click:MPeriods.RollBack">
                <i class="ace-icon fa fa-refresh"></i>
            </a>
        </div>
        <div class="btn-group">
            <a class="btn btn-sm btn-white btn-primary dropdown-toggle" data-toggle="dropdown">
              <span data-bind="text: $data.Year()"></span>
              <i class="fa fa-angle-down icon-on-right fa-light"></i>
            </a>
            <ul class="dropdown-menu dropdown-light dropdown-caret">
                <!-- ko foreach:Catalogue.GetAll('year') -->
                <li>
                  <a data-bind="click: $parent.UpdateYear.bind(null,$data.id)">
                    <span data-bind="text: $data.name"></span>
                  </a>
                </li>
               <!-- /ko -->
           </ul>
       </div>
    <!-- /ko -->
    <!-- ko if:Mode()=='PeriodMap' -->
        <!-- ko template:'model_connect_buttons' --><!-- /ko -->
    <!-- /ko -->
    <!-- ko if:Mode()=='PeriodAutoFill' -->
        <!-- ko template:'model_connect_buttons' --><!-- /ko -->
    <!-- /ko -->
</div>

<div class="row adminbody" data-bind="with:MPeriods">
		<div class='row'><!-- ko template: 'inline_error' --><!-- /ko --></div>
		<!-- ko if:$data.IsModelEdit() -->
			<!-- ko template:'model_edit' --><!-- /ko -->
		<!-- /ko -->
        <!-- ko if:Mode()=='PeriodAutoFill' -->
            <!-- ko template:'connect_form' --><!-- /ko -->
        <!-- /ko -->

        <!-- ko if:Mode()=='PeriodMap' -->
            <!-- ko template:'connect_form' --><!-- /ko -->
        <!-- /ko -->
        <!-- ko if:Mode()=='PeriodEdit' -->
        <div class='handsonContainer' data-bind='with:MPeriods.PeriodEditConfig' >
            <div class="handsontable single"  data-bind="
                handson-table:MPeriods.PeriodEditConfig,
                handson-table-result:MPeriods.PeriodEditResult,
                handson-table-changes:MPeriods.PeriodEditChanges,
                handson-table-changes-count:MPeriods.PeriodEditChangesCount
            "></div>  
        </div>
        <!-- /ko -->
</div>

<div class="bottomPannel" data-bind="with:MPeriods">
	<ul class="toolPanel nav nav-tabs background-blue">
    	<!-- ko template:{name:'tb_mode_switch_li',data:{icon:'fa-calendar',title:'Периоды',mode:'Periods'}} --><!-- /ko -->    	
    	<!-- ko template:{name:'tb_mode_switch_li',data:{icon:'fa-folder-open-o',title:'Группы Периодов',mode:'PeriodGrps'}} --><!-- /ko -->    	
    	<!-- ko template:{name:'tb_mode_switch_li',data:{icon:'fa-calendar-check-o',title:'Отк.Периоды',mode:'PeriodEdit'}} --><!-- /ko -->    	
        <!-- ko template:{name:'tb_mode_switch_li',data:{icon:'fa-calendar-plus-o',title:'Доп.Периоды',mode:'PeriodMap'}} --><!-- /ko -->       
        <!-- ko template:{name:'tb_mode_switch_li',data:{icon:'fa-calendar-times-o',title:'Перевод Периодов',mode:'PeriodRedirect'}} --><!-- /ko -->       
        <!-- ko template:{name:'tb_mode_switch_li',data:{icon:'fa-calendar-minus-o',title:'АвтоПрокачка.Периоды',mode:'PeriodAutoFill'}} --><!-- /ko -->        
    	<!-- ko template:{name:'tb_mode_switch_li',data:{icon:'fa-calendar-o',title:'Календарь',mode:'Calendar'}} --><!-- /ko -->    	
	</ul>
</div>
